{% extends "base.html" %}
{% block content %}

    <h3 class="page_title amber-text center-align">Find a Book</h3>

    <div class="row card-panel grey lighten-5">
      <form action="{{ url_for('search') }}" method="POST" class="col s12">
        <div class="row valign-wrapper center-align">
          <div class="input-field col s12 m8">
            <i class="fas fa-search prefix amber-text"></i>
            <input type="text" name="query" id="query" minlength="2" class="validate" required>
            <label for="query">Search Books</label>
          </div>
          <div class="col s12 m4">
            <a href="{{ url_for('get_books') }}" class="red btn text-shadow">Reset</a>
            <button type="submit" class="amber btn text-shadow">
              <i class="fas fa-search left"></i> Search
            </button>
          </div>
        </div>
      </form>
    </div>

    <div class="row book_panel">
      {% for book in books %}
      <div class="col s12 m4">
        <div class="card-panel book-teaser amber lighten-5">
          <div class="row center">
            <a href="{{ url_for('reviews', book_id=book._id) }}">
              <img src="{{ book.book_cover }}" alt="Book Cover" class="book_cover">
            </a>
          </div>
          <div class = "row">
            <div class="col s12">
              <h4>{{ book.book_title }}</h4>
              <h5>by {{ book.book_author }}</h5>
              <h5>Genre: {% for genre in book.genre %}
                {{ genre }},
                {% if loop.last %}
                  {{ genre }}
                {% endif %} 
                {% endfor %}
              </h5>
            </div>
          </div>
          
                      <!--rating-->
                      <div class="row">
                        <div class="col s12">Reviewer's Rating: {{ book.rating }}/5</div>
                      </div>
            
                      <div class="row">
                        <div class="col s12">Book Club Rating: {{ book.rating }}/5</div>
                      </div>
      </div>
      </div>
      {% endfor %}
    </div>

{% endblock %}